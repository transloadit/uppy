language: node_js
node_js:
- 4.2.2
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  apt: true
  directories:
  - node_modules
  - website/node_modules
before_script:
- export PATH=${PATH}:${HOME}/bin
- export DISPLAY=:99.0
- /sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile
  --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16
script:
- npm run build
- npm run test
- npm run test:acceptance:handleservers
- git config --global user.name 'Uppy Bot'
- git config --global user.email 'uppybot@uppy.io'
- if [ "${TRAVIS_PULL_REQUEST}" == "false" ] && [ "${TRAVIS_BRANCH}" == "master" ]; then npm run web:deploy --quiet; else echo "Skipping for non-master/prs"; fi
env:
  global:
  - CXX=g++-4.8
  - secure: "Z+Twmk8/yo4FbeHqk3TcLVK4fR+KUoevrUxkRM6SLckVeCwlFnoD1kQ4JTVHuS2LbW9r2T4VJ/SC6yDtdjqMRvD/ZtPw//vMw9mKyBEMZN4uxOhmHp4hltkBErqeHbZpgd4eSwSVrqDwliK27Q42wIs+Rjilc3UXqddWEmmw/VuxGR3SRpACILqe2Fqm/g73iX/7PNNASuXwmWi6Vf5ZeBQTGiCfPETblBa4WSCrPpsBv5flUEGNM9uFoXXqjAC2TyZrS4yiFGxJNf5/UPp9xipr+RhoEp8NX2GP0W2jDDfUTHFGfcUyF2lluVJKpkHjYQYrYBknjTFcQHL+aE7GWU7f6kh4g3i6e9qktVFV7yNPPokxuvVG+AxExVhZHK3wBTh2ZWs5vjcd0u5w+IV9+v+d/CZWl/zGRcHDILt2eUW9KZwoGtgrcaPnlVtYPCRBXPpsoD+lE3uOuGGGS/V5lmhBnCLexj+2rzztyb8zhQgZB2rLKF1zQ5JiBE+z0ykjHtZWMECE7r4H8K4hoaeOlIG9suPSgwQgl5HFniFUBzHWXqdsOA/tAwGAtdYSlSNAPrkiMYqXjb+1Je2uhYnfV2roBolufLmgYjmDkpVtaY968Zi3qSYTDX7gkx4NEdkiZDLJK8iXXF5RlcHHaUlno+4ytvcNMpf6V9EpTVeLaIs="
  - secure: o92bhAYmfSq6G4cpWcd8pbvmcL3cQFNXvXNmrdhWsbyaDJm29MHGNfM5d0AwRhw1X/mrIB7COG8QgK9OSYvFjFsHMKUhsryl5AWJS54535RzSV/NjQAZZvFJIf4SUhu5OEPxyMFrkCaaK1yWiWRaDRTwcjmHnkCJnhrcrtiOXPnbK+oTvDFZj7/Fz8ljtdFcAt/KGnKxreF8lojCeGh/lVLmWKliA6t55buguk1fF168wzFsUawFZSsq/gCma2SuW89CdGoGJzyUtkHSrm5T4t4wA8beQElzT1cu5Yhl62XzelXSU9zwag7/N0PlTqLvji/hhPNgck2Vj37FYo99asygiGrXBkSA+wC8tnGjAvEwO9eEch7wdnFn1IFNSNI9rDrRWBWnoa0Rq2UyUtdcXuNvDIYxsZSkWf6cuNI/BaEj2eYOb9vn8GE1hHVHZ0fLDbSN/PW5htjUf/pklBSoIyQjYE7vQAEnpkiOrpacvaMEzdAQtawIIN7HBeVJeyecV0R2r8E8NzL1JcqZ8GCfEjyAeEYjlKDRGXrzu/2PfFWXarOjr+ePgKVZxd65j9Ueqv70t1kUn1Y5AfcuiqaRveVQKn3vGLzO0u6mDz8t6Ic1/8/t4gQ569AoQFm59TLlD69kZzu05r3qF9X81fPhr2UU3tX4ZpyG1K2qk+bzn0Y=
  - secure: UYwkNMvX05Wp3gafovGHi+F2ks4/Hsb1Z3tfTTSFQdocOrU64gsE4be9jhoBJm1qnkAjOegySD0/YLA+kH5EwyUVbKrCKPNRvLcUnYGV1ohR3aWZkZhKbG9vR9zl1MyHFuL/2JTg+yI5ZyXB2GkZVfZgHvWOlfsakq8JA5G4DHLoJcIA8/cKeyb4HDWm7ZsELoUW3+VKk6M7OGS5kSMeMEJHHDim3A9mT6sBraQ3ZA+Xek6vNfoDEslG2coybsLBgbTCbj/xANnPk8xWo03ZtGG8LIWkq1FcU0Eqfi0Jp9o9lYElzTW0fx6uaeLcBX/VhywszSw4EQT0dRKzUlB3H2vdRqSo71PdUwYoSV+oUSU9WlOe0Z8efRN1sXqS0BefL4vod6Rl6N4cXhQ5JNQtRoNkQ7mDzTcBudCw0jFjSyW+1ikiH19tNFd4SMBaaqLWOeia967/atwXMid7Oc1o2tFT3Lf3w9DjeTarsdW9K7zPQpN6DPUbbitEi1XqIdwXpNy5F15Jy7/qJzsaZ6xI5pRD98NePP3j2fqwLbJSyohut2mbxWPGYEfpLsYhwVPQaLm6xJZK2ThYJ3naRUzMFm4Rox+I2FhVX2j0ZsLQf9P+Xi3jahv3I3LI7iHHlLNRgyVlZ/+FcJPMPpmBqsyWnvmniZiXqk3g1499LIOjf2A=
  - secure: gAu+EDw7HOBeemDsEroMhGPkwvsnAkTlX3EbgyZUVs/QyCad9nxK5NxqSST8S7+CAqcAMtpS7HBiwjsjV2qZ3iJ12W1KuN3V7td7hDX/FC7rzSIjyNfkrgOvb/JYRG9RMtMLds2XxyojZYGjyBZyjunZwI8UquZqJwJhOQo0hdv4Fj0rCjq7jeMGrKgSiVokOqoi3KcfBugbwPLP6JMDTmcIvcD+x3HhvxMWXIfuJyaalZYu1wfD7s811iTl9IN+VT4YkXx7K0V6AmwH8zJKEG0GJdhJsjQcKOqBpk0jjfvQk/XQOFqYwimzRkYyNrzLOni7HHxyaMcv8SzwrM8beasu6o9HPsmOFtwNYiacuHi6ikan9EyGgaONk62NYtAmuV/72y2NbEbpzpSwcBvkDwyVq2iif3S5zU4qWTJh1K3YfJqOqhhNwL/j36drNb5xnRyTCl79Y+60lgv922H0FifpUZRZUc+NvRV9Q+uqJdlK2vzfr4P6BWBvOjlOfzSFqbY++UucuzfdAVblUbhTQ6bofPFw8ZLMylu7QxdCpu7htaNgxssWiNW+BaUSm6fzQD8ibP1u3n6gmSEVxZuUMBeKRE8fDR4YfSpq0BYgLrc+sUNq1iZzKnVGKL79mJkOAS1Sm9tI/vqG5f2Uf4donAWT53+d3UAH9eSKTA29meA=
  - secure: NpYqPeN/gloTHMywnfVlyLFj/IbIBRkL1nb4SdtA99NfRJo0kDB+k6wLNaLNXY2q0WhpeTQIDPJ2ptONf6u1Gu2yxFKN3myYG8XVcmYmIWbqKAaKFT9+SY0SrP22nPmXQL7oyfWxsTLUyuh8F/52FlPro/o58QZK8cJE5CCkVeGrTb5LetKqmtuvndfBRrb0cLOCkk48emUtwjbMYUMDDwCIWmtTPKMQCot8kn2XAQQZ6kDiP8tu5WhdNnS3kjfOCLW9A7EYt8ULkRXWHN1yUoVdWwLlDEMglkEthSp63bmDrx0iX00lVYFbzkohEYA4tCzXklP1TKKV6xQG6DoCsnJzyaqT6m8WNj0EWghBff7Cus0WvLKZaAOSkZfsyG/q94PdTh1PMiRbNuJQja/JnXqFrzFLF/bExA3tHZOcBajGL2fynOj+IsNuv+DdP0q+kApUwZKFG4fZ6MQkzl+R0gc4RvlVakp3sTgQwefd0VJN980+SKFzofdzEkaLCwLMXsYhBLLo6jb6/Xm0rq/uWZLM/kKdnA2qYxMUjF3KZY4HT2P4nVyFscDmuDPjJ49dtKvWK7XGCER1JtW2J+yAyZ2Slv/TzDWrM0IRZlYGbRkjq6Sly0KGABanMXC2J29Gy5Q+wNoFD5NBE+pz/Mt99ggXn7HrlCQvTpdtCoIpYpk=
  - secure: YpVwjcpc6FomKgRb0tP8MpITEOfvMP2kTAnpSfG3USMW3mZ8Zkn8CLr471DjpmVE2jHklI6AfPTpGPFb1VOsrS7Ea4jxAJOdBwH6Ab7kL52GX0GYtPsSxeTVME5IMZXsU90UCbAXKOEkZbGq5sIaIHjAePmcNSv+OHb157fqcyX0oSJWDg1eVzBikgWhpKtlcbPFp7AdoIvhDr5bPLyV1c0HmOIEirc0VcoQg3fYsKB7mY5tP7KCqCIJtZtD0+FiSamp13WImD0/7wwX0hbTG2KH3zgjyiKOLxsbwXOIpXIJ0utXY4EFZBTTSZjItbL/f5wzZ+xBhwAsy5/Vi2pCtiVI2sUZ98b3FioLdQ7+3jQviNmOam6b56KTNAy2l4Tlu5h8PGtBvsDo+ZcgJ06q65YRZQcnOIweGv0vZ31cdgcVXRb+8fWFywQeIk6DD0FluB3/zZl7pn2Olha0gv4DxiythXDAHRoTzZfFfaPL1T+kl6ViGNQvKi6ucy8/ltlO/JKAeJlWKJouWOe2TvGMNU6JKQfAiqz1y16lVa8P5VYj+cRbsfalYfhqEf96kMdelgCup7mQdTMAiOP6lhIF9ItMjVqVFQECYy6oItxAGXc8UAJJcKJSc6DwVTgOK6V7LfkoM8O6qMeFzfpPnsFEl3uwjQEmMzc7Wk2LxkrFoBI=
  - secure: gqSy8e0l5gm6xqgKtKwbE8K+bhIrL9+NwqG6nADUhEFZqtNiNzeKu2Ym++cTrRJhBaJQr9gy+GJtL2BH2rFwIhtuk+/zsdaenPC8tZ/Phof5MBVJApPJ0kgbbFpcJFx8xu6TrlOfDls0Cu8RHA6FQ/4RSoBooCZOrWHrPXpJiN04lAZUpUdJyAg/1suP2owAcvJAjKI7laWVLTkhDZNjDDJ2gSjGtF3AnWL0piRCJXAWehrgcLFC8PMC9RAG/Puxh9WH8dCH8Tp0ccfib11X2mtT1Ii6mwg8y6U6h3yoRC9dJCB+IGjDKkE8aEESzvsQBp3T6QIqxNK4gAhN90je+bT9AjoHLVcIao7aCHCAvOXlQobZCzWdbfCZJEba+Xse2Zvwyy0mjEae97eljsRwsaH7qXEMcBNipqU9S1p7DQAwLU1Wgkyn1eml65Gc12VZ+fEjzS10OfYLHnxxUnrjGGJqNOdVkj+arwGm2ZTYzrUB3csHm47mTQz2x9QqWE4ICs3D/OLK4zMNq+pSiYtYv6sbY4WDWSFXMQtkys7DgCBAiQg7Eekedp22o/mVX2b3ZQ11SUAT5MIvhGRzvsk32puaiVW2tSAXeH534diuNSUuguzoDrS1fGBsBLeQbV+f0QfhjCziF1hWzp3rwq2b3szsC3lDOxG3Zq/lCGIZ050=
notifications:
  slack:
    secure: L3iQQE8sZ0ik1Z26gPoNMiIam9EOEwYhraHCY60Jk/wmfH6SW/727yKXpgcb/yayx37rUZplvoO7H8e05ISxTJKSepEeqbBUIBQs48S8hr+FHk0VPtpP4HGxqaITRLm+mI1coPRvfISxzrB8d240oup6muhC9Ws4/LXi6v8miyIOs2zoYmGxd56TrUeON3UYlKt6dMava0V4bugARzrafN/tfyI9ccqbHzQLBspQvBI61DzZ5I2vnWpkjfWgIHz9Fl4VzXHqMXwjuTUEu8ibA12b3dHZiJEAoqeb9Oj9QcLPbstPLhlNTZZaOrfiFtwLctI2rFh37slDpAfk5idv3ycxcoG5rbCxgyg5i6dpQqrqHxnyglgHg2/nZ+YA5okeS7nJJNtU/4S6AFRWOUUWMVVY0VBEV+8w+uurl0PDy80RUY3uyK64qAgQ8U0M81/Ys1oyWyn78TqHcbby7V2Ws5I9Yakrq8D+mdfsWYCio8F6LXHSwJ0mt2FanJtdDvpPk9sAwsXZN0n8xhELt5TiRp3bzVIQ0IPUgF54dTG9/zWRvC1P4TFaFU/2fg73ZEUC5aWJoFMnLSZjbZvp5gwpCVd0MjSBk80nF9dHYcavIgJ0wMGI3BMb8Nn6+T11Gw/ycr7OGU4NMkj7i8vSFgKF74piWZyiNW8orkMN6XZgM+o=
