<script lang="ts">
  // This file was generated by build-components.mjs
  // ANY EDITS WILL BE OVERWRITTEN!
  import { getContext, mount } from 'svelte'
  import {
    UploadButton as PreactUploadButton,
    type UploadButtonProps,
    type UppyState,
  } from '@uppy/components'
  import { h as preactH } from 'preact'
  import { render as preactRender } from 'preact/compat'
  import { UppyContextKey, UppyStateKey } from '../UppyContextProvider.svelte'
  import type Uppy from '@uppy/core'

  const props: Omit<UploadButtonProps, 'ctx'> = $props()
  const uppy = getContext<Uppy | undefined>(UppyContextKey)
  const state = getContext<UppyState>(UppyStateKey)
  let container: HTMLElement

  $effect(() => {
    if (container) {
      preactRender(
        preactH(PreactUploadButton, {
          ...props,
          ctx: {
            ...state,
            uppy,
          },
        } satisfies UploadButtonProps),
        container,
      )
    }
  })
</script>

<div bind:this={container}></div>
