# We use self-hosted Ceph for testing purposes.
# services:
#   ceph:
#     image: quay.io/ceph/ceph:v18.2.7
#     container_name: ceph-prod
#     hostname: ceph-node
#     ports:
#       - '7480:7480' # RGW port
#       - '6789:6789' # MON port
#       - '3300:3300' # MGR port
#     environment:
#       CEPH_CONF_DIR: /etc/ceph
#       CEPH_DATA_DIR: /var/lib/ceph
#       CEPH_LOG_DIR: /var/log/ceph
#       CEPH_OSD_ID: 0
#       CEPH_PUBLIC_NETWORK: 0.0.0.0/0
#       CEPH_CLUSTER_NETWORK: 0.0.0.0/0
#       MON_IP: 0.0.0.0/0
#       # S3 credentials
#       RGW_ACCESS_KEY: demo_access_key
#       RGW_SECRET_KEY: demo_secret_key
#     volumes:
#       # Mount initialization script
#       - ./start-ceph.sh:/usr/local/bin/start-ceph.sh:ro
#       # Use tmpfs for in-memory storage
#       - type: tmpfs
#         target: /var/lib/ceph
#         tmpfs:
#           size: 2147483648 # 2GB
#       - type: tmpfs
#         target: /etc/ceph
#         tmpfs:
#           size: 10485760 # 10MB
#       - type: tmpfs
#         target: /var/log/ceph
#         tmpfs:
#           size: 104857600 # 100MB
#     privileged: true
#     restart: unless-stopped
#     deploy:
#       resources:
#         limits:
#           cpus: '2.0'
#           memory: 4G

# networks:
#   ceph-net:
#     driver: bridge
#     ipam:
#       config:
#         - subnet: 172.20.0.0/24
