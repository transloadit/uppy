services:
  garage:
    container_name: garage
    image: docker.io/dxflrs/garage:v2.0.0
    volumes:
      # config
      - ./garage/garage.toml:/etc/garage.toml:ro
      # metadata and data, mapped to what the config expects
      - ./garage/meta:/var/lib/garage/meta
      - ./garage/data:/var/lib/garage/data
    ports:
      - 9000:9000
      - 3903:3903
    restart: always
    healthcheck:
      test: ['CMD', 'garage', 'status']
      interval: 5s
      timeout: 10s
      retries: 5
      start_period: 10s
